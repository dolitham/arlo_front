<link href="https://fonts.googleapis.com/css?family=Alegreya+Sans|Roboto|Comfortaa" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">





<mat-nav-list>
  <mat-list-item *ngFor="let transaction of transactions"
                 [class.selected]="selectedTransactions.includes(transaction)"
                 (click)="onClick(transaction)"

  >
    <mat-icon mat-list-icon>
      <span [ngSwitch]="transaction.category">
        <span *ngSwitchCase="'Food'"><i class="fas fa-apple-alt"></i> </span>
        <span *ngSwitchCase="'Restaurants'"><i class="far fa-utensils"></i></span>
        <span *ngSwitchCase="'Laundry'"><i class="fas fa-shower"></i></span>
        <span *ngSwitchCase="'Snacks'"><i class="fas fa-coffee"></i></span>
        <span *ngSwitchCase="'Transports'"><i class="fas fa-bicycle"></i> </span>
        <span *ngSwitchCase="'Home'"><i class="fas fa-home"></i></span>
        <span *ngSwitchCase="'Health'"><i class="fas fa-heartbeat"></i></span>
        <span *ngSwitchCase="'Bills'"><i class="fas fa-file-invoice"></i></span>
        <span *ngSwitchCase="'Fine Food'"><i class="fas fa-store"></i></span>
        <span *ngSwitchCase="'Shopping'"><i class="fas fa-shopping-bag"></i></span>
        <span *ngSwitchCase="'Fun'"><i class="fas fa-theater-masks"></i></span>
        <span *ngSwitchCase="'Input'"><i class="fas fa-hand-holding-usd"></i></span>
      </span>
    </mat-icon>


    <h4 mat-line class="content" [ngClass]="transaction.linked?'linked':'name'">
      {{transaction.name}}
      <span *ngIf="transaction.pending;then hourglass"> </span>

      <ng-template #hourglass>
        <i class="far fa-hourglass"></i> &nbsp;
      </ng-template>
    </h4>

    <p mat-line class="content" [ngClass]="transaction.linked?'linked':'name'">
      {{transaction.category}}
      <span [ngSwitch]="transaction.method" class="method-symbol">
        <span *ngSwitchCase="'card'"><i class="far fa-credit-card"></i> </span>
        <span *ngSwitchCase="'transfer'"><i class="far fa-exchange-alt"></i></span>
        <span *ngSwitchCase="'cash'"><i class="far fa-coins"></i></span>
        <span *ngSwitchCase="'hotel'"><i class="fas fa-concierge-bell"></i></span>
        <span *ngSwitchCase="'fict'"><i class="fas fa-credit-card"></i> </span>
        <span *ngSwitchCase="'-'"><i class="fas fa-question"></i></span>
      </span>
    </p>

    <div class="amount" [ngClass]="transaction.amount<0?'negative':'positive'">
      {{transaction.amount | currency:'EUR':'symbol-narrow'}}
    </div>


    <button mat-icon-button [matMenuTriggerFor]="menu">
      <mat-icon>more_vert</mat-icon>
    </button>

    <mat-menu #menu="matMenu">

      <button mat-menu-item disabled>
        <mat-icon>edit</mat-icon>
        <span>Edit</span>
      </button>

      <button mat-menu-item (click)="onReferenceClick(transaction)" disabled={{!transaction.bank_name}}>
        <mat-icon>book</mat-icon>
        <span>Add Reference</span>
      </button>

      <button mat-menu-item disabled>
        <mat-icon>link_off</mat-icon>
        <span>Unlink</span>
      </button>
    </mat-menu>
  </mat-list-item>
</mat-nav-list>

<mat-expansion-panel [expanded]="false">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <i class="fas fa-edit"></i>
    </mat-panel-title>

  </mat-expansion-panel-header>

  <div >
    <app-set-fields [transactions]="selectedTransactions"></app-set-fields>
  </div>

  <div>
    <mat-slide-toggle [(ngModel)]="hideLinked" (change)="onHideLinkedChange()" color="primary">

      <div *ngIf="hideLinked; else elseBlock">&nbsp; <i class="fas fa-eye-slash"></i></div>
      <ng-template #elseBlock>&nbsp; <i class="fas fa-eye"></i></ng-template>
    </mat-slide-toggle>
  </div>


  <div >
    <span class="right">
      <app-fetch-transactions></app-fetch-transactions>
    </span>
    <span class="left">
      <app-recurring-transactions class="recurring"></app-recurring-transactions>
    </span>
  </div>

</mat-expansion-panel>

<div>
<ul class="transactions">
  <li *ngFor="let transaction of transactions"
      [class.selected]="selectedTransactions.includes(transaction)"
    (click)="onClick(transaction)" (contextmenu)="onReferenceClick(transaction)">

    <span class="name" [ngClass]="transaction.linked?'linked':'name'">
      <span [ngSwitch]="transaction.method" class="method-symbol">
        <span *ngSwitchCase="'card'"><i class="far fa-credit-card"></i> </span>
        <span *ngSwitchCase="'transfer'"><i class="far fa-exchange-alt"></i></span>
        <span *ngSwitchCase="'cash'"><i class="far fa-coins"></i></span>
        <span *ngSwitchCase="'hotel'"><i class="fas fa-concierge-bell"></i></span>
        <span *ngSwitchCase="'fict'"><i class="fas fa-credit-card"></i> </span>
        <span *ngSwitchCase="'-'"><i class="fas fa-question"></i></span>
        &nbsp;
      </span>

      <span *ngIf="transaction.pending;then hourglass"> </span>

      <ng-template #hourglass>
        <i class="far fa-hourglass"></i> &nbsp;
      </ng-template>
       {{transaction.name }}
    </span>

    <span class="amount" [ngClass]="transaction.amount<0?'negative':'positive'">
      <span *ngIf="transaction.originalAmount;then original"> </span>
      <ng-template #original>
        <span class="originalAmount">
          ({{ transaction.originalAmount | currency:transaction.originalCurrency:'symbol-narrow' }})
        </span>
      </ng-template>

      {{transaction.amount | currency:'EUR':'symbol-narrow'}}
    </span>

    <span class="category" [ngClass]="getCategoryStyleClass(transaction)">{{transaction.category}}</span>
  </li>
</ul>
</div>
